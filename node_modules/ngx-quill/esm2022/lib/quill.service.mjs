/* eslint-disable @typescript-eslint/no-explicit-any */
import { DOCUMENT } from '@angular/common';
import { Injectable, Inject, Optional } from '@angular/core';
import { defer, firstValueFrom, isObservable } from 'rxjs';
import { shareReplay } from 'rxjs/operators';
import { defaultModules, QUILL_CONFIG_TOKEN, } from 'ngx-quill/config';
import * as i0 from "@angular/core";
export class QuillService {
    constructor(injector, config) {
        this.config = config;
        this.quill$ = defer(async () => {
            if (!this.Quill) {
                // Quill adds events listeners on import https://github.com/quilljs/quill/blob/develop/core/emitter.js#L8
                // We'd want to use the unpatched `addEventListener` method to have all event callbacks to be run outside of zone.
                // We don't know yet if the `zone.js` is used or not, just save the value to restore it back further.
                const maybePatchedAddEventListener = this.document.addEventListener;
                // There're 2 types of Angular applications:
                // 1) zone-full (by default)
                // 2) zone-less
                // The developer can avoid importing the `zone.js` package and tells Angular that he/she is responsible for running
                // the change detection by himself. This is done by "nooping" the zone through `CompilerOptions` when bootstrapping
                // the root module. We fallback to `document.addEventListener` if `__zone_symbol__addEventListener` is not defined,
                // this means the `zone.js` is not imported.
                // The `__zone_symbol__addEventListener` is basically a native DOM API, which is not patched by zone.js, thus not even going
                // through the `zone.js` task lifecycle. You can also access the native DOM API as follows `target[Zone.__symbol__('methodName')]`.
                this.document.addEventListener =
                    // eslint-disable-next-line @typescript-eslint/dot-notation
                    this.document['__zone_symbol__addEventListener'] ||
                        this.document.addEventListener;
                const quillImport = await import(/* webpackChunkName: 'quill' */ 'quill');
                this.document.addEventListener = maybePatchedAddEventListener;
                this.Quill = (quillImport.default ? quillImport.default : quillImport);
            }
            // Only register custom options and modules once
            this.config.customOptions?.forEach((customOption) => {
                const newCustomOption = this.Quill.import(customOption.import);
                newCustomOption.whitelist = customOption.whitelist;
                this.Quill.register(newCustomOption, true, this.config.suppressGlobalRegisterWarning);
            });
            return await this.registerCustomModules(this.Quill, this.config.customModules, this.config.suppressGlobalRegisterWarning);
        }).pipe(shareReplay({ bufferSize: 1, refCount: true }));
        this.document = injector.get(DOCUMENT);
        if (!this.config) {
            this.config = { modules: defaultModules };
        }
    }
    getQuill() {
        return this.quill$;
    }
    /**
     * Marked as internal so it won't be available for `ngx-quill` consumers, this is only
     * internal method to be used within the library.
     *
     * @internal
     */
    async registerCustomModules(Quill, customModules, suppressGlobalRegisterWarning) {
        if (Array.isArray(customModules)) {
            // eslint-disable-next-line prefer-const
            for (let { implementation, path } of customModules) {
                // The `implementation` might be an observable that resolves the actual implementation,
                // e.g. if it should be lazy loaded.
                if (isObservable(implementation)) {
                    implementation = await firstValueFrom(implementation);
                }
                Quill.register(path, implementation, suppressGlobalRegisterWarning);
            }
        }
        // Return `Quill` constructor so we'll be able to re-use its return value except of using
        // `map` operators, etc.
        return Quill;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.0.1", ngImport: i0, type: QuillService, deps: [{ token: i0.Injector }, { token: QUILL_CONFIG_TOKEN, optional: true }], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "17.0.1", ngImport: i0, type: QuillService, providedIn: 'root' }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.0.1", ngImport: i0, type: QuillService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root',
                }]
        }], ctorParameters: () => [{ type: i0.Injector }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [QUILL_CONFIG_TOKEN]
                }] }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVpbGwuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1xdWlsbC9zcmMvbGliL3F1aWxsLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsdURBQXVEO0FBQ3ZELE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQTtBQUMxQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBWSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFDdEUsT0FBTyxFQUFFLEtBQUssRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFjLE1BQU0sTUFBTSxDQUFBO0FBQ3RFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQTtBQUU1QyxPQUFPLEVBQ0wsY0FBYyxFQUNkLGtCQUFrQixHQUduQixNQUFNLGtCQUFrQixDQUFBOztBQUt6QixNQUFNLE9BQU8sWUFBWTtJQWlEdkIsWUFDRSxRQUFrQixFQUM2QixNQUFtQjtRQUFuQixXQUFNLEdBQU4sTUFBTSxDQUFhO1FBL0M1RCxXQUFNLEdBQW9CLEtBQUssQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNqRCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDZix5R0FBeUc7Z0JBQ3pHLGtIQUFrSDtnQkFDbEgscUdBQXFHO2dCQUNyRyxNQUFNLDRCQUE0QixHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUE7Z0JBQ25FLDRDQUE0QztnQkFDNUMsNEJBQTRCO2dCQUM1QixlQUFlO2dCQUNmLG1IQUFtSDtnQkFDbkgsbUhBQW1IO2dCQUNuSCxtSEFBbUg7Z0JBQ25ILDRDQUE0QztnQkFDNUMsNEhBQTRIO2dCQUM1SCxtSUFBbUk7Z0JBQ25JLElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCO29CQUM1QiwyREFBMkQ7b0JBQzNELElBQUksQ0FBQyxRQUFRLENBQUMsaUNBQWlDLENBQUM7d0JBQ2hELElBQUksQ0FBQyxRQUFRLENBQUMsZ0JBQWdCLENBQUE7Z0JBQ2hDLE1BQU0sV0FBVyxHQUFHLE1BQU0sTUFBTSxDQUFDLCtCQUErQixDQUFDLE9BQU8sQ0FBQyxDQUFBO2dCQUN6RSxJQUFJLENBQUMsUUFBUSxDQUFDLGdCQUFnQixHQUFHLDRCQUE0QixDQUFBO2dCQUU3RCxJQUFJLENBQUMsS0FBSyxHQUFHLENBQ1gsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUNqRCxDQUFBO2FBQ1Q7WUFFRCxnREFBZ0Q7WUFDaEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsT0FBTyxDQUFDLENBQUMsWUFBWSxFQUFFLEVBQUU7Z0JBQ2xELE1BQU0sZUFBZSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQTtnQkFDOUQsZUFBZSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFBO2dCQUNsRCxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FDakIsZUFBZSxFQUNmLElBQUksRUFDSixJQUFJLENBQUMsTUFBTSxDQUFDLDZCQUE2QixDQUMxQyxDQUFBO1lBQ0gsQ0FBQyxDQUFDLENBQUE7WUFFRixPQUFPLE1BQU0sSUFBSSxDQUFDLHFCQUFxQixDQUNyQyxJQUFJLENBQUMsS0FBSyxFQUNWLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLDZCQUE2QixDQUMxQyxDQUFBO1FBQ0gsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQTtRQU1yRCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUE7UUFFdEMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDaEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLE9BQU8sRUFBRSxjQUFjLEVBQUUsQ0FBQTtTQUMxQztJQUNILENBQUM7SUFFRCxRQUFRO1FBQ04sT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFBO0lBQ3BCLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILEtBQUssQ0FBQyxxQkFBcUIsQ0FDekIsS0FBVSxFQUNWLGFBQXlDLEVBQ3pDLDZCQUF1QztRQUV2QyxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDaEMsd0NBQXdDO1lBQ3hDLEtBQUssSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsSUFBSSxhQUFhLEVBQUU7Z0JBQ2xELHVGQUF1RjtnQkFDdkYsb0NBQW9DO2dCQUNwQyxJQUFJLFlBQVksQ0FBQyxjQUFjLENBQUMsRUFBRTtvQkFDaEMsY0FBYyxHQUFHLE1BQU0sY0FBYyxDQUFDLGNBQWMsQ0FBQyxDQUFBO2lCQUN0RDtnQkFDRCxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxjQUFjLEVBQUUsNkJBQTZCLENBQUMsQ0FBQTthQUNwRTtTQUNGO1FBRUQseUZBQXlGO1FBQ3pGLHdCQUF3QjtRQUN4QixPQUFPLEtBQUssQ0FBQTtJQUNkLENBQUM7OEdBMUZVLFlBQVksMENBbURELGtCQUFrQjtrSEFuRDdCLFlBQVksY0FGWCxNQUFNOzsyRkFFUCxZQUFZO2tCQUh4QixVQUFVO21CQUFDO29CQUNWLFVBQVUsRUFBRSxNQUFNO2lCQUNuQjs7MEJBb0RJLFFBQVE7OzBCQUFJLE1BQU07MkJBQUMsa0JBQWtCIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nXG5pbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3QsIEluamVjdG9yLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBkZWZlciwgZmlyc3RWYWx1ZUZyb20sIGlzT2JzZXJ2YWJsZSwgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnXG5pbXBvcnQgeyBzaGFyZVJlcGxheSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJ1xuXG5pbXBvcnQge1xuICBkZWZhdWx0TW9kdWxlcyxcbiAgUVVJTExfQ09ORklHX1RPS0VOLFxuICBRdWlsbENvbmZpZyxcbiAgQ3VzdG9tTW9kdWxlLFxufSBmcm9tICduZ3gtcXVpbGwvY29uZmlnJ1xuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290Jyxcbn0pXG5leHBvcnQgY2xhc3MgUXVpbGxTZXJ2aWNlIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICBwcml2YXRlIFF1aWxsITogYW55XG4gIHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50XG4gIHByaXZhdGUgcXVpbGwkOiBPYnNlcnZhYmxlPGFueT4gPSBkZWZlcihhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLlF1aWxsKSB7XG4gICAgICAvLyBRdWlsbCBhZGRzIGV2ZW50cyBsaXN0ZW5lcnMgb24gaW1wb3J0IGh0dHBzOi8vZ2l0aHViLmNvbS9xdWlsbGpzL3F1aWxsL2Jsb2IvZGV2ZWxvcC9jb3JlL2VtaXR0ZXIuanMjTDhcbiAgICAgIC8vIFdlJ2Qgd2FudCB0byB1c2UgdGhlIHVucGF0Y2hlZCBgYWRkRXZlbnRMaXN0ZW5lcmAgbWV0aG9kIHRvIGhhdmUgYWxsIGV2ZW50IGNhbGxiYWNrcyB0byBiZSBydW4gb3V0c2lkZSBvZiB6b25lLlxuICAgICAgLy8gV2UgZG9uJ3Qga25vdyB5ZXQgaWYgdGhlIGB6b25lLmpzYCBpcyB1c2VkIG9yIG5vdCwganVzdCBzYXZlIHRoZSB2YWx1ZSB0byByZXN0b3JlIGl0IGJhY2sgZnVydGhlci5cbiAgICAgIGNvbnN0IG1heWJlUGF0Y2hlZEFkZEV2ZW50TGlzdGVuZXIgPSB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXJcbiAgICAgIC8vIFRoZXJlJ3JlIDIgdHlwZXMgb2YgQW5ndWxhciBhcHBsaWNhdGlvbnM6XG4gICAgICAvLyAxKSB6b25lLWZ1bGwgKGJ5IGRlZmF1bHQpXG4gICAgICAvLyAyKSB6b25lLWxlc3NcbiAgICAgIC8vIFRoZSBkZXZlbG9wZXIgY2FuIGF2b2lkIGltcG9ydGluZyB0aGUgYHpvbmUuanNgIHBhY2thZ2UgYW5kIHRlbGxzIEFuZ3VsYXIgdGhhdCBoZS9zaGUgaXMgcmVzcG9uc2libGUgZm9yIHJ1bm5pbmdcbiAgICAgIC8vIHRoZSBjaGFuZ2UgZGV0ZWN0aW9uIGJ5IGhpbXNlbGYuIFRoaXMgaXMgZG9uZSBieSBcIm5vb3BpbmdcIiB0aGUgem9uZSB0aHJvdWdoIGBDb21waWxlck9wdGlvbnNgIHdoZW4gYm9vdHN0cmFwcGluZ1xuICAgICAgLy8gdGhlIHJvb3QgbW9kdWxlLiBXZSBmYWxsYmFjayB0byBgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcmAgaWYgYF9fem9uZV9zeW1ib2xfX2FkZEV2ZW50TGlzdGVuZXJgIGlzIG5vdCBkZWZpbmVkLFxuICAgICAgLy8gdGhpcyBtZWFucyB0aGUgYHpvbmUuanNgIGlzIG5vdCBpbXBvcnRlZC5cbiAgICAgIC8vIFRoZSBgX196b25lX3N5bWJvbF9fYWRkRXZlbnRMaXN0ZW5lcmAgaXMgYmFzaWNhbGx5IGEgbmF0aXZlIERPTSBBUEksIHdoaWNoIGlzIG5vdCBwYXRjaGVkIGJ5IHpvbmUuanMsIHRodXMgbm90IGV2ZW4gZ29pbmdcbiAgICAgIC8vIHRocm91Z2ggdGhlIGB6b25lLmpzYCB0YXNrIGxpZmVjeWNsZS4gWW91IGNhbiBhbHNvIGFjY2VzcyB0aGUgbmF0aXZlIERPTSBBUEkgYXMgZm9sbG93cyBgdGFyZ2V0W1pvbmUuX19zeW1ib2xfXygnbWV0aG9kTmFtZScpXWAuXG4gICAgICB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2RvdC1ub3RhdGlvblxuICAgICAgICB0aGlzLmRvY3VtZW50WydfX3pvbmVfc3ltYm9sX19hZGRFdmVudExpc3RlbmVyJ10gfHxcbiAgICAgICAgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyXG4gICAgICBjb25zdCBxdWlsbEltcG9ydCA9IGF3YWl0IGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAncXVpbGwnICovICdxdWlsbCcpXG4gICAgICB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgPSBtYXliZVBhdGNoZWRBZGRFdmVudExpc3RlbmVyXG5cbiAgICAgIHRoaXMuUXVpbGwgPSAoXG4gICAgICAgIHF1aWxsSW1wb3J0LmRlZmF1bHQgPyBxdWlsbEltcG9ydC5kZWZhdWx0IDogcXVpbGxJbXBvcnRcbiAgICAgICkgYXMgYW55XG4gICAgfVxuXG4gICAgLy8gT25seSByZWdpc3RlciBjdXN0b20gb3B0aW9ucyBhbmQgbW9kdWxlcyBvbmNlXG4gICAgdGhpcy5jb25maWcuY3VzdG9tT3B0aW9ucz8uZm9yRWFjaCgoY3VzdG9tT3B0aW9uKSA9PiB7XG4gICAgICBjb25zdCBuZXdDdXN0b21PcHRpb24gPSB0aGlzLlF1aWxsLmltcG9ydChjdXN0b21PcHRpb24uaW1wb3J0KVxuICAgICAgbmV3Q3VzdG9tT3B0aW9uLndoaXRlbGlzdCA9IGN1c3RvbU9wdGlvbi53aGl0ZWxpc3RcbiAgICAgIHRoaXMuUXVpbGwucmVnaXN0ZXIoXG4gICAgICAgIG5ld0N1c3RvbU9wdGlvbixcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgdGhpcy5jb25maWcuc3VwcHJlc3NHbG9iYWxSZWdpc3Rlcldhcm5pbmdcbiAgICAgIClcbiAgICB9KVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVnaXN0ZXJDdXN0b21Nb2R1bGVzKFxuICAgICAgdGhpcy5RdWlsbCxcbiAgICAgIHRoaXMuY29uZmlnLmN1c3RvbU1vZHVsZXMsXG4gICAgICB0aGlzLmNvbmZpZy5zdXBwcmVzc0dsb2JhbFJlZ2lzdGVyV2FybmluZ1xuICAgIClcbiAgfSkucGlwZShzaGFyZVJlcGxheSh7IGJ1ZmZlclNpemU6IDEsIHJlZkNvdW50OiB0cnVlIH0pKVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGluamVjdG9yOiBJbmplY3RvcixcbiAgICBAT3B0aW9uYWwoKSBASW5qZWN0KFFVSUxMX0NPTkZJR19UT0tFTikgcHVibGljIGNvbmZpZzogUXVpbGxDb25maWdcbiAgKSB7XG4gICAgdGhpcy5kb2N1bWVudCA9IGluamVjdG9yLmdldChET0NVTUVOVClcblxuICAgIGlmICghdGhpcy5jb25maWcpIHtcbiAgICAgIHRoaXMuY29uZmlnID0geyBtb2R1bGVzOiBkZWZhdWx0TW9kdWxlcyB9XG4gICAgfVxuICB9XG5cbiAgZ2V0UXVpbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMucXVpbGwkXG4gIH1cblxuICAvKipcbiAgICogTWFya2VkIGFzIGludGVybmFsIHNvIGl0IHdvbid0IGJlIGF2YWlsYWJsZSBmb3IgYG5neC1xdWlsbGAgY29uc3VtZXJzLCB0aGlzIGlzIG9ubHlcbiAgICogaW50ZXJuYWwgbWV0aG9kIHRvIGJlIHVzZWQgd2l0aGluIHRoZSBsaWJyYXJ5LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFzeW5jIHJlZ2lzdGVyQ3VzdG9tTW9kdWxlcyhcbiAgICBRdWlsbDogYW55LFxuICAgIGN1c3RvbU1vZHVsZXM6IEN1c3RvbU1vZHVsZVtdIHwgdW5kZWZpbmVkLFxuICAgIHN1cHByZXNzR2xvYmFsUmVnaXN0ZXJXYXJuaW5nPzogYm9vbGVhblxuICApOiBQcm9taXNlPGFueT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGN1c3RvbU1vZHVsZXMpKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgICBmb3IgKGxldCB7IGltcGxlbWVudGF0aW9uLCBwYXRoIH0gb2YgY3VzdG9tTW9kdWxlcykge1xuICAgICAgICAvLyBUaGUgYGltcGxlbWVudGF0aW9uYCBtaWdodCBiZSBhbiBvYnNlcnZhYmxlIHRoYXQgcmVzb2x2ZXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbixcbiAgICAgICAgLy8gZS5nLiBpZiBpdCBzaG91bGQgYmUgbGF6eSBsb2FkZWQuXG4gICAgICAgIGlmIChpc09ic2VydmFibGUoaW1wbGVtZW50YXRpb24pKSB7XG4gICAgICAgICAgaW1wbGVtZW50YXRpb24gPSBhd2FpdCBmaXJzdFZhbHVlRnJvbShpbXBsZW1lbnRhdGlvbilcbiAgICAgICAgfVxuICAgICAgICBRdWlsbC5yZWdpc3RlcihwYXRoLCBpbXBsZW1lbnRhdGlvbiwgc3VwcHJlc3NHbG9iYWxSZWdpc3Rlcldhcm5pbmcpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGBRdWlsbGAgY29uc3RydWN0b3Igc28gd2UnbGwgYmUgYWJsZSB0byByZS11c2UgaXRzIHJldHVybiB2YWx1ZSBleGNlcHQgb2YgdXNpbmdcbiAgICAvLyBgbWFwYCBvcGVyYXRvcnMsIGV0Yy5cbiAgICByZXR1cm4gUXVpbGxcbiAgfVxufVxuIl19